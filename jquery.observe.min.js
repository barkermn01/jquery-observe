/*--------------------------------------------*
 * jQuery-observe
 *--------------------------------------------*
 * Author Emil Kilhage
 * MIT Licensed
 *--------------------------------------------*
 * Last Update: 2011-05-11
 * Version 0.8
 *--------------------------------------------*/
(function(a,b){function k(b,c,d){setTimeout(function(){a(b).trigger(e+"."+c,[d])},0)}function j(b){return a.data(b,d)}function i(b){var c={},d;d={add:function(f,h){d.has(f)||(c[f]=g(b,f)),h&&a(b).bind(e+"."+f,h);return d},remove:function(f,g){d.has(f)&&(c[f].remove(),delete c[f]),g&&a(b).unbind(e+"."+f,g);return d},has:function(a){return c.hasOwnProperty(a)}};return d}"use strict";var c=.3,d="__observer",e="observe",f="value",g,h=["__defineGetter__","defineProperty","timer"];a.fn.observe=function(a,b){b||(b=a,a=f);return this.bind(e+"."+a,b)},a.fn.unobserve=function(a,b){a=a||f;return this.unbind(e+"."+a,b)},a.each(["unobserve","observe"],function(b,c){a[c]=function(b,d,e){a(b)[c](d,e);return j(b)}}),a.Observer=i,i.get=j,i.timer=i.using=b,i.types=a.merge([],h),i.INTERVAL=c,i.changeDefaultProperty=function(a){f=a},a.event.special.observe={setup:function(){a.data(this,d,i(this))},teardown:function(){a.removeData(this,d)}},a.each({remove:"unbind",add:"bind"},function(b,c){a.event.special.observe[b]=function(g){var h=a.data(this,d),i=g.namespace;i||(i=f,a(this)[c](e+"."+f,g.handler)),h&&h[b](i)}}),g=function(){function o(){clearInterval(i.timer),i.timer=b}function n(){i.timer=setInterval(function(){var a=g.length,b=0,c,d;for(;b<a;b++){c=g[b][l];for(d in c)c[d]()}},c)}var d=a.isFunction(Object.defineProperty),e={},f=a.isFunction(e.__defineGetter__),g=[],j=0,l=1,m=2;if(d||f){i.using=h[d?1:0];return function(a,b){function g(){return c}function e(e){var f=c;c=e,d===!1&&f!=e&&k(a,b,f)}var c=a[b],d=!1;f?(a.__defineSetter__(b,e),a.__defineGetter__(b,g)):Object.defineProperty(a,b,{set:e,get:g});return{remove:function(){d=!0}}}}i.using=h[2];return function(a,c){var d=g.length,e,f=a[c],h=d,p;while(d--){p=g[d];if(p[j]===a){e=p[l],h=d-1;break}}e===b&&(e={},p=[a,e,0],g.push(p)),p[m]++,e[c]=function(){if(a[c]!=f){var b=f;f=a[c],k(a,c,b)}},i.timer===b&&n();return{remove:function(){e.hasOwnProperty(c)&&(delete e[c],--p[m]===0&&(g.splice(h),g.length===0&&o()))}}}}()})(jQuery)
